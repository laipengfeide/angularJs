<div class="tableCont">
	<!-- 工具栏的按钮，可以自定义事件 -->
	<div id="toolbar" class="btn-group">
		<button type="button" class="btn btn-default">
			<i class="glyphicon glyphicon-plus"></i>
		</button>
		<button type="button" class="btn btn-default">
			<i class="glyphicon glyphicon-heart"></i>
		</button>
		<button type="button" class="btn btn-default">
			<i class="glyphicon glyphicon-trash"></i>
		</button>
	</div>

	<table id="demo" class="table table-striped table-hover table-bordered" data-toolbar="#toolbar" data-search="true" data-show-refresh="true" data-show-columns="true" >
		<thead>
			<tr>
				<th width="3%" data-field="prodId">产品Id</th>
				<th width="10%" data-field="nameOfProduct">产品名称</th>
				<th width="4%" data-field="categoryId">产品类别</th>
				<th width="5%" data-field="domicileOfCapital">资本类型</th>
				<th width="8%" data-field="underwriter">发行机构</th>
				<th width="6%" data-field="managementInstitution">基金公司</th>
				<th width="5%" data-field="managementInstitution2">管理机构</th>
				<th width="3%" data-field="flag">角标</th>
				<th width="7%" data-field="beginTime">上线时间</th>
				<th width="7%" data-field="endTime">下线时间</th>
				<th width="4%" data-field="status">发布状态</th>
				<th width="4%" data-field="fundRaisingStatus">募集状态</th>
				<th width="3%" data-field="totalScore">打分</th>
				<th width="3%" data-field="modesOfGuaranteeScore">担保</th>
				<th width="3%" data-field="invsetmentTargetScore">投资</th>
				<th width="3%" data-field="underwriterScore">发行</th>
				<th width="3%" data-field="sourceOfPaymentScore">还款</th>
				<th width="3%" data-field="issuerDescriptionScore">融资</th>
				<th width="10%" data-formatter="operateFormatter">操作</th>

			</tr>
		</thead>
	</table>
</div>
<script>
	$(function() {
		var data = [ {
			"prodId" : "001",
			"nameOfProduct" : "中江信托-金马432号",
			"categoryId" : "1",
			"domicileOfCapital" : "0",
			"underwriter" : "中江国际信托股份有限公司",
			"managementInstitution" : "",
			"managementInstitution2" : "四川信托",
			"flag" : "2",
			"beginTime" : "1604777600",
			"endTime" : "1665344000",
			"status" : "0",
			"fundRaisingStatus" : "1",
			"totalScore" : "77",
			"modesOfGuaranteeScore" : "8",
			"invsetmentTargetScore" : "12",
			"underwriterScore" : "32",
			"sourceOfPaymentScore" : "8",
			"issuerDescriptionScore" : "17",
		},
			{
				"prodId" : "003",
				"nameOfProduct" : "中江信托-金马433号",
				"categoryId" : "1",
				"domicileOfCapital" : "0",
				"underwriter" : "中江国际信托股份有限公司",
				"managementInstitution" : "",
				"managementInstitution2" : "四川信托",
				"flag" : "2",
				"beginTime" : "1604777600",
				"endTime" : "1665344000",
				"status" : "0",
				"fundRaisingStatus" : "1",
				"totalScore" : "77",
				"modesOfGuaranteeScore" : "8",
				"invsetmentTargetScore" : "12",
				"underwriterScore" : "32",
				"sourceOfPaymentScore" : "8",
				"issuerDescriptionScore" : "17",
			},
			{
				"prodId" : "004",
				"nameOfProduct" : "中江信托-金马532号",
				"categoryId" : "1",
				"domicileOfCapital" : "0",
				"underwriter" : "中江国际信托股份有限公司",
				"managementInstitution" : "",
				"managementInstitution2" : "四川信托",
				"flag" : "2",
				"beginTime" : "1604777600",
				"endTime" : "1665344000",
				"status" : "0",
				"fundRaisingStatus" : "1",
				"totalScore" : "77",
				"modesOfGuaranteeScore" : "8",
				"invsetmentTargetScore" : "12",
				"underwriterScore" : "32",
				"sourceOfPaymentScore" : "8",
				"issuerDescriptionScore" : "17",
			},
			{
				"prodId" : "024",
				"nameOfProduct" : "中江信托-金马437号",
				"categoryId" : "1",
				"domicileOfCapital" : "0",
				"underwriter" : "中江国际信托股份有限公司",
				"managementInstitution" : "",
				"managementInstitution2" : "四川信托",
				"flag" : "2",
				"beginTime" : "1604777600",
				"endTime" : "1665344000",
				"status" : "0",
				"fundRaisingStatus" : "1",
				"totalScore" : "77",
				"modesOfGuaranteeScore" : "8",
				"invsetmentTargetScore" : "12",
				"underwriterScore" : "32",
				"sourceOfPaymentScore" : "8",
				"issuerDescriptionScore" : "17",
			},
			{
				"prodId" : "005",
				"nameOfProduct" : "中江信托-金马467号",
				"categoryId" : "1",
				"domicileOfCapital" : "0",
				"underwriter" : "中江国际信托股份有限公司",
				"managementInstitution" : "",
				"managementInstitution2" : "四川信托",
				"flag" : "2",
				"beginTime" : "1604777600",
				"endTime" : "1665344000",
				"status" : "0",
				"fundRaisingStatus" : "1",
				"totalScore" : "77",
				"modesOfGuaranteeScore" : "8",
				"invsetmentTargetScore" : "12",
				"underwriterScore" : "32",
				"sourceOfPaymentScore" : "8",
				"issuerDescriptionScore" : "17",
			}
		];

		$("#demo").bootstrapTable({
			//url: "http://ydjr.dev.chengyiwm.com/goldman-mgr/listProduct",
			data : data,
			sortName : "prodId", //排序列 
			striped : true, //條紋行 
			sidePagination : "server", //服务器分页 
			clickToSelect : true, //选择行即选择checkbox 
			singleSelect : true, //仅允许单选 
			searchOnEnterKey : true, //ENTER键搜索 
			pagination : true, //启用分页 
			escape : true, //过滤危险字符 
			queryParams : getParams, //携带参数 
			method : "post", //请求格式 
			responseHandler : responseHandler,
		});

	});

	function operateFormatter(value, row, index) {
		return [
			'<button type="button" class="RoleOfD btn btn-default  btn-sm" style="margin-right:15px;">绑定</button>',
		].join('');
	}
	/**
	 * 默认加载时携带参数
	 * 
	 * 将自带的param参数转化到cy的请求逻辑协议
	 */
	function getParams(params) {
		var query = $("#searchKey").val();
		console.log(JSON.stringify(params));
		return {
			head : {
				userId : "11154",
				skey : "6FC19FCE5D8DCF130954D8AE2CADB30A",
				platform : "pc",
				imei : "",
				appVersion : "",
				cityId : "",
				platformVersion : "",
				deviceId : "",
				channel : "",
				protoVersion : 1,
				isPreview : 2
			},
			body : {
				'query' : params.search, // 搜索参数
				'start' : params.offset, // 分页开始位置
				'pageSize' : params.limit, //每页多少条

			}
		}
	}

	/**
	 * 获取返回的数据的时候做相应处理，让bootstrap table认识我们的返回格式
	 * @param {Object} res
	 */
	function responseHandler(res) {
		return {
			"rows" : res.body.listProduct, // 具体每一个bean的列表
			"total" : res.body.totalCount // 总共有多少条返回数据
		}
	}
</script>